\documentclass[a4paper]{jsarticle}
\usepackage[]{../math_note, enumitem}

\newcommand{\Der}{\mathrm{Der}}

\title{正標数の環における導分}
\author{七条 彰紀}

\begin{document}
\maketitle

\section{準備}
\begin{Def}[Derivation, $k$-Derivation.]
    $A$ :: ring, $M$ :: moduleとする．
    任意の$a,b \in A$に対して
    次を満たす写像$D: A \to M$をderivationとよぶ．
    \begin{enumerate}[label=(\roman*)]
        \item $D(a+b)=D(a)+D(b)$.
        \item $D(ab)=D(a) \cdot b+a \cdot D(b)$.
    \end{enumerate}
    (ii)はLeibniz Formula (or Rule)と呼ばれる．
    以下，必要に応じて$D(a)$を$Da$と表記する．

    準同型$f: k \to A$によって$A$を$k$-moduleとみなせる時，
    $D \circ f=0$を満たすderivation $D$を$k$-derivationと呼ぶ．

    $\Der(A,M)$で$A \to M$のderivation全体を表す．
    $\Der(A,A)$は$\Der(A)$と略す．
    $\Der_k(A,M)$で$A \to M$の$k$-derivation全体を表す．
    $\Der_k(A,A)$は$\Der_k(A)$と略す．
\end{Def}
$\Der(A,M), \Der_k(A,M)$が$A$-moduleになることは明らか．
$a \in A, n \geq 0$について$Da^n=n a^{n-1} Da$が
成り立つことは帰納法を用いて簡単に示せる．

次が成り立つ．
\begin{Prop}
    $A$ :: ring, $D \in \Der(A)$, $a,b \in A$, $n \in \Z_{\geq 0}$とする．
    \[ D^n(ab)=\sum_{i=0}^n \binom{n}{i} (D^i a)(D^{n-i} b). \]
    ただし$D^0=\id{A}$とする．
\end{Prop}
証明は$n$についての帰納法に拠る．

今，$A$ :: ringが正標数$n>0$
\footnote
{
    $f: \Z \to A$を唯一の写像$1_{\Z} \mapsto 1_A$とすると，
    $f^{-1}((0))=\ker f \subseteq \Z$は$\Z$のイデアルであり，
    したがって$\ker f=(n)$となる$n \in \Z_{\geq 0}$が存在する．
    この$n$を$A$の標数と呼ぶ．
    $A$が整域，すなわち$(0) \subseteq A$が素イデアルならば，
    $\ker f$も素イデアルになり（可換環論の基本的命題），
    したがって標数$n$は素数になる．
}
を持つとしよう．
$n$が素数ならば，
$\binom{n}{i}$は$i=1,\dots,n-1$について$n$の倍数であるから，
次が成り立つ．
\[ D^n(ab)=(D^n a) \cdot b+a \cdot (D^n b). \eqno{(*)}\]
すなわち，$D^n \in \Der(A)$となる．

\section{($*$)の反例}
一方，$n$が素数でない，
すなわち合成数でない時には($*$)が成り立たないことがある．

\begin{Example}
    $A=(\Z/4\Z)[x], D=x \frac{d}{dx}$とする．
    この場合，$A$の標数は$4$．
    ただし$\frac{d}{dx}$は$x$についての通常の微分であり，
    明示すれば$\frac{d}{dx} x=1, \frac{d}{dx} 1=0$を満たす．
    $\frac{d}{dx} \in \Der(A)$と$\Der(A)$ :: $A$-moduleより$D \in \Der(A)$．
    $Dx=x \cdot 1=x$だから，$D^4(x^2)$は次のように成る．
    \[ D^4(x^2)=D^3(D(x^2))=D^3(2x^{2-1} (Dx))=D^3(2x^2)=\dots=2^4 x^2=0. \]
    一方，$D^4(x^2)=D^4(x \cdot x)$と考えて($*$)の右辺を計算すると，次のよう．
    \[ (D^4 x) \cdot x+x \cdot (D^4 x)=2x^2 \neq 0. \]
    なので($*$)は成立しない．
\end{Example}

\begin{Example}
    $n$に加えて文字$a,b$を加えて更に一般化する．
    $A=(\Z/n\Z)[x], D=x \frac{d}{dx}$とする．
    ある$a,b>0$について$(a+b)^n \neq a^n+b^n$であるとしよう．
    この時，($*$)の反例がある:
    \[ D^n(x^a \cdot x^b)=(a+b)^n x^{a+b} \neq (a^n+b^n)x^{a+b}=D^n(x^a) \cdot x^b+x^a \cdot D^n(x^b). \]
\end{Example}

一方，次の命題が成立する．
\begin{Prop}
    $n$を正整数とする．次は同値
    \footnote
    {
        Pratibha Ghatage and Brian Scott(2005),
        \textit{Exactly When Is $(a + b)^{n} \equiv a^{n} + b^{n} ~(\bmod~ n)$ ?},
        \url{http://www.jstor.org/stable/30044877}.
    }．
    \begin{enumerate}[label=(\arabic*)]
        \item $\Forall{a,b \in \Z/n\Z} (a+b)^n=a^n+b^n$．
        \item $\Forall{x \in \Z/n\Z} x^n=x$．
        \item $n$は素数またはCarmichael数．
    \end{enumerate}
\end{Prop}
\begin{proof}
    $(1) \implies (2)$の証明は$x=1+1+\dots+1$とすれば出来るし，
    $(2) \implies (1)$の証明は$x=a+b$とすれば出来る．
    $(2) \iff (3)$はFermatの小定理とCarmichael数の定義である．
\end{proof}

したがって，ここでの方法では$n$がCarmichael数
($561, 1105, 1729, 2465, 2821, \dots$)であるときの($*$)の反例が作れない．
標数$n$がCarmichael数ならば常に($*$)が成り立つ可能性もあるが，
それはFuture Workとしよう．

\section{($*$)の成立}
標数$n$が合成数であっても($*$)が成り立つのはどんな場合か，
という問に対しては次がひとつの答えを与える．
\begin{Prop}
    $A, k$ :: ring, $D \in \Der_k(A)$とする．
    $A$の標数$n$は合成数であるとする．
    $A$は次を満たすとする．
    \begin{enumerate}[label=(\arabic*)]
        \item $A$の任意の元が$G \subseteq A$の元の積の$k$線型結合として書ける．
        \item $G$の任意の元$g$について$D^2g=0$．
    \end{enumerate}
    この時，$D^n=0$．
    したがって任意の$a,b \in A$について($*$)の等号が成り立つ．
\end{Prop}
この命題の仮定のうち，条件(2)以外は次のような環で成り立つ:
$k$上の多項式環・形式的ベキ級数環，及びその剰余環，$k$の元による局所化，テンソル積，直積．

これは次の補題から得られる．
\begin{Lemma}
    $A, k$ :: ring, $D \in \Der_k(A)$とする．
    $x \in A$と$n,k \in \Z_{\geq 0}$について，次が成り立つ．
    \[ D^k x^n=\sum_{i=0}^{k-1} \binom{k-1}{i} n^{\underline{i+1}} x^{n-(i+1)} (Dx)^i (D^{k-i} x). \]
    ここで$n^{\underline{i+1}}=n(n-1)\cdots(n-(i+1)+1)$は降下階乗べきである．
\end{Lemma}
$D \in \Der_k(A)$は$k$線形写像であること，
及び$n^{\underline{i+1}}$が$i=0,\dots,k-1$で$(i+1)!$の倍数に成ることに気をつければ，
この補題から上の命題はすぐに出る．

\end{document}

\documentclass[a4paper]{jsarticle}
\usepackage[dvipdfmx, hiresbb]{graphicx}
\usepackage{booktabs}
\usepackage{macros}

\begin{document}
\title{ゼミノート \#2 \\ Sites and Sheaves}
\author{七条彰紀}
\maketitle

\section{Motivation.}
scheme, stack等には以下のような包含関係がある．
\[\xymatrix{
    {} & \text{Algebraic Stack} \ar@{^{(}->}[r]& \text{Stack} \ar@{^{(}->}[r]& \text{Presheaf of Grupoids} \\
    \text{Scheme} \ar@{^{(}->}[r]\ar@{^{(}->}[ru]& \text{Algebraic Space} \ar@{^{(}->}[r]\ar@{^{(}->}[u]&
        \text{Space} \ar@{^{(}->}[r]\ar@{^{(}->}[u]& \text{Presheaf of Sets} \ar@{^{(}->}[u]
}\]
最終的にセミナーを通じて我々が定義したいのはalgebraic stackであるが，
今回はそれよりも定義が簡素な``space"を定義する．
先にspaceの定義文を示そう．

\begin{Def}[Space, \cite{GomezAS} p.26]
    $S$ :: schemeとする．
    Space over $S$ (or $S$-space)とは，
    big etale site over $S$上にある，集合のsheafである．
\end{Def}
ここに現れる``big etale site"と``big etale site上のsheaf"を以下で定義する．
さらにsheafの射について幾つか定義をすれば，
algebraic spaceまで定義できる．

定義だけではspaceのlocalは性質を調べる手段がないため，
次回は「高次版のsheafの貼り合わせ」と呼べる``Descent theory"を学ぶ．

\section{Definitions : Sites.}
以下で導入するGrothendieck topologyは，
「Sheafを定義するのに必要な位相空間の定義を抽出し，圏論的に一般化したもの」である．
$X$ :: toplological spaceとし，sheaf on $X$の定義を見なおしてみよう．
すると，sheaf on  $X$は次に挙げるもののみを用いて定義されていると分かる．
\begin{enumerate}
    \item $X$の開部分集合と包含写像が成す圏．
    \item 開部分集合$U \subseteq X$のopen covering．
    \item 同じく$U$のopen covering :: $\{U_i\}_i$が与えられたときの族$\{ U_i \cap U_j \}_{i,j}$
\end{enumerate}
そこで次のように定義する．

\begin{Def}[Grothendieck Topology]
    $\cat{C}$ :: cateogoryについて，
    $\cat{C}$上のGrohendieck topologyは
    任意の$X \in \cat{C}$に
    $\cat{C}$の射の集まり$\{X_i \to X\}_{i \in I}$の集まり(collection of collections)を
    対応させる$\Cov$で構成される．
    さらに，$\Cov$は以下を満たすように要請される．
    \begin{enumerate}[label=(\alph*)]
        \item
            $X' \to X$ :: isoならば$\{X' \to X\} \in \Cov(X)$.
        \item
            $\{U_i \to U\} \in \Cov(U), V \to U \in \cat{C}$について，
            $\{U_i \times_U V \to V\} \in \Cov(V)$.
        \item
            $\{U_i \to U\}_i \in \Cov(U)$をとり，
            さらに各$i$について$\{V_{i,j} \to U_i\}_j \in \Cov(U_i)$をとる． \mbox{}\\
            この時，合成も$\Cov$に入っている : $\{V_{i,j} \to U_i \to U\}_{i,j} \in \Cov(U)$.
    \end{enumerate}
\end{Def}

\begin{Remark}
    ここで「集合」ではなく「集まり」という言葉を用いたのは，
    これらが集合ではない可能性があるからである．
    この問題（圏論でもしばしば現れる）を取り扱うためには，
    $2$つの解決策がある．
    $1$つ目はGrothendieckの宇宙公理UをZFC公理系に加えたZFCU公理系で議論を行うことである．
    もう$1$つは真のクラスを扱えるNBG公理系で議論を行うことである．
    
    後者の方針を採用する場合は，
    Grothendieck topologyの定義で現れた「集まりの集まり」という言葉に注意が必要である．
    というのも，たとえNBG公理系でも，
    真のクラスを要素に持つ真のクラスは許されていないからである．
    この問題を解決するには以下のように$\Cov$を定義すれば良い
    （以下のように書き換えれば良いという事がわかれば十分なので，
    実際に以下の定義を採用することはない）:

        全ての$U \in \cat{C}$について$\Cov(U)$はcodomainが$U$である射のクラスである．
        任意の要素$[ V \to U ] \in \Cov(U)$について
        この要素を含む$\Cov(U)$の部分クラス$\{U_i \to U\}_i \subset \Cov(U)$が存在し，
        以下が成立する．
        （以下略）．
\end{Remark}

$\Cov$の元には大抵，以下の条件が課される．
\begin{Def}[(Jointly) Surjective Family]
    ある圏の射の集まり$\{U_i \to U\}_i$について，
    \[ \bigsqcup_i U_i \to U \]がsurjectiveである時，
    （同値な条件として，
    $\im (U_i \to U)$のset-theoritic unionが$U$に等しい時，）
    この集まり$\{U_i \to U\}$を(jointly) surjective familyという．
\end{Def}

\begin{Def}[Site]
    圏$\cat{C}$と$\cat{C}$上のGrothendieck topology :: $\Cov$の組をsiteと呼ぶ．
    siteに対し，その部分である圏をthe underlying categoryと呼ぶ．
    しばしば$\Cov$を略して$\cat{C}$のみでsiteを表す．
\end{Def}

\begin{Def}[Localized Site.]
    site :: $\cat{C}$と$X \in \cat{C}$について，
    localized site :: $\cat{C}/X$を以下のように定義する．

    $\cat{C}/X$のunderlying categoryはslice cageory :: $\cat{C}/X$である．
    したがって対象は$\cat{C}$内の$X$への射である．
    Grothendieck topology :: $\Cov$は，
    \[
        \{ [U_i \to X] \to [U \to X] \}_i \in \Cov([U \to X])
        \implies \{U_i \to U\} \in \Cov(U).
    \]
    のように定められる．
\end{Def}

\begin{Def}[Diagrams (or Comma Site).]
    $\Delta$ :: category, $\cat{C}$ :: site, 
    $F \colon \Delta^{op} \to \cat{C}$ :: functorとする．
    この時site :: $\cat{C}_F$を以下のように定める．

    まずundrelying categoryは$(\id[\cat{C}] \downarrow F)$である．
    したがって対象は$X \to F(\delta) \ (\delta \in \Delta)$である．
    $\Cov$は以下のように定める．
    \[
        \left\{
        \vcenter{
        \xymatrix@R=8pt{
            X'_i \ar[d]\ar[r]^-{f_i^{\flat}}& X \ar[d]\\
            F(\delta_i) \ar[r]_-{F(f_i)}& F(\delta)
        }}
        \right\} \in \Cov([X \to F(\delta)])
        \implies
        f_i \colon \delta \to \delta_i \text{ :: iso. and }
        \{f_i^{\flat} \colon X'_i \to X \} \in \Cov(X).
    \]
\end{Def}

\begin{Def}[Continuous Functor.]
    $\cat{C}, \cat{C}'$ :: sitesとする．
    $f \colon \cat{C} \to \cat{C}'$ :: functorがcontinuousとは，
    以下の$2$つが成立すること:
    \begin{enumerate}
        \item 
        任意の$X \in \cat{C}$と$\{U_i \to X\}_i \in \Cov_{\cat{C}}(X)$について，
        \[ \{ f(U_i) \to f(X) \}_i \in \Cov_{\cat{C}'}(f(X)) \]となる．

        \item
        $\cat{C}$の任意の射$X_1 \to Y, X_2 \to Y$について，
        fiber product :: $X_1 \times_Y X_2$が$\cat{C}$に存在するならば，
        \[ f(X_1 \times_Y X_2) \iso f(X_1) \times_{f(Y)} f(X_2). \]
    \end{enumerate}
\end{Def}

\begin{Remark}
    後に示すように，
    continuous functorはよくあるケースでcategory of sheaves on siteの間の関手を誘導する．
    これはschemeの間のcontinuous mapが
    category of sheaves on schemeの間の
    関手(e.g. inverse image functor, direct image functor)を定めるのと同じである．
\end{Remark}

\section{Examples : Sites.}
\subsection{Site.}
\begin{Example}[Classical topology.]
    $X$ :: topological spaceとし，
    $O(X)$を以下のような圏とする．
    \begin{description}[labelindent=5mm]
        \item[対象] $X$の開集合．
        \item[射] 包含射．
    \end{description}
    この時，$U \in O(X)$のcovering :: $\Cov(U)$を，
    $U$への包含射のみから成るjointly surjective familyの集合
    \footnote{ 包含射の個数は高々$2^{\#X}$以下の濃度なので，familyの集まりは集合． }
    とする．

    以上で定まるsite :: $(O(X), \Cov)$は
    通常のtopologyをGrothendieck topologyの枠組の中で再現している．
\end{Example}

以下で主に用いるのは，
$\cat{C}$がslice category :: $\Sch/X \ (X \in \Sch)$の部分圏であるようなsiteである．
$X \in \Sch$に対して，
このようなsiteはunderlying category ($\subset \Sch/X$)と
Grothendieck topology ($\Cov$)からなるから， 
以下の図の(a) $U \to X$, (b) $U_i \to U$がどのようなものであるか定めれば定義できる．
\begin{center}
     \includegraphics[width=5cm]{./images/site.pdf}
\end{center}
すなわち，以下の未完成な定義文をテンプレートとする，一連の定義文の群がある．
\begin{Def}[$***$ site]
    $X$ :: schemeについて，
    圏$\cat{C}$を以下で定める．
    \begin{description}[labelindent=5mm]
        \item[対象] (a)である射$U \to X$.
        \item[射]   二つの対象の間の射$[U \to X] \to [U' \to X]$は，$X$-morphism :: $U \to U'$.
    \end{description}
    $[U \to X] \in \cat{C}$に対して，
    $\Cov(U)$を(b)である射の集まり$\{U_i \to U\}_i$であって
    jointly surjective familyであるものの集まりとする．

    以上の$\cat{C}$と$\Cov$からなるsiteを $***$ site of $X$と呼ぶ．
\end{Def}

Grothendieck topologyの定義から分かるとおり，
性質(b)がstable under base change \& compositionであれば，
以上のテンプレートはsiteの定義文と成る．

\begin{samepage}
\begin{Def}
    以上の定義文テンプレートを用いて，(a), (b)と各siteの定義を以下のように対応させる．
    (a)が``--"とある箇所は「$\Sch/X$の任意の射」を意味する．
    さらに，``open inclusion"はZariski開集合の間にある包含射のことである
    （したがってsmall Zariski siteのunderlying categoryにはZariski開集合しか無い）．

\begin{table}[ht]
\begin{tabular}{c|lllllll}
\toprule
    $***$ & small Zariski  & big Zariski    & small etale & big etale\\ \midrule
    (a)   & open immersion & --             & etale       & --       \\
    (b)   & open immersion & open immersion& etale       & etale    \\ \hline \hline
    $***$ & lisse-etale & smooth & fppf                                   & fpqc                  \\ \midrule
    (a)   & smooth      & smooth & --                                     & --                    \\
    (b)   & etale       & smooth & flat\&locally of finite presentation & flat\&quasi-compact \\ \bottomrule
\end{tabular}
\end{table}

    図の再掲:
    \begin{center}
         \includegraphics[width=5cm]{./images/site.pdf}
    \end{center}
\end{Def}
\end{samepage}

\begin{Remark}
``fppf"は
``fid\`{e}lement plate de pr\'{e}sentation finie"（仏語）すなわち
``faithfully flat and of finite presentation"の略である．
flat\& locally of finite presentationならば実際にこのように成る．
同様に``fpqc"は``fid\`{e}lement plat et quasi-compact"（仏語）すなわち
``faithfully flat and quasi-compact"の略である．
\end{Remark}

\begin{Def}
    $***$ site of $X$の記号を以下のように定める．
\begin{table}[ht]
\begin{tabular}{c|lllllllll@{}}
    \toprule
    $***$ & small Zariski     & big Zariski       & small etale      & big etale\\ \midrule
    名前    & $\mathrm{Zar}(X)$ & $\mathrm{ZAR}(X)$ & $\mathrm{Et}(X)$ & $\mathrm{ET}(X)$ \\ \hline \hline
    $***$ & lisse-etale         & smooth           & fppf               & fpqc               \\ \midrule
    名前    & $\mathrm{Lis\mdash Et}(X)$ & $\mathrm{Sm}(X)$ & $\mathrm{Fppf}(X)$ & $\mathrm{Fpqc}(X)$ \\ \bottomrule
\end{tabular}
\end{table}

    \cite{StacksProj}ではbig Zariski site of $X$を$(\Sch/X)_{Zariski}$などと書く．
\end{Def}


\subsection{Continuous Functor.}
\begin{Example}
    $X, X'$ :: topological spaceについて，
    $O(X), O(X')$ :: classical site,
    $f \colon X \to X'$ ::continuous mapとする．
    この時，$f^{-1} \colon O(X') \to O(X)$ :: continuous functor.
    （$f$は必ずしもcontinuous functorでないことに注意．）
\end{Example}

\begin{Remark}
    $f \colon \cat{C} \to \cat{C}'$ :: functor between sitesが
    continuousであるための条件を再掲する．
    \begin{enumerate}
        \item 
        任意の$X \in \cat{C}$と$\{U_i \to X\}_i \in \Cov_{\cat{C}}(X)$について，
        \[ \{ f(U_i) \to f(X) \}_i \in \Cov_{\cat{C}'}(f(X)) \]となる．

        \item
        $\cat{C}$の任意の射$X_1 \to Y, X_2 \to Y$について，
        fiber product :: $X_1 \times_Y X_2$が$\cat{C}$に存在するならば，
        \[ f(X_1 \times_Y X_2) \iso f(X_1) \times_{f(Y)} f(X_2). \]
    \end{enumerate}
    
    例と照らし合わせると，
    $1$つめの条件は$f^{-1}$が開集合を開集合に写すことに対応し，
    $2$つめの条件は$f^{-1}$が$\cap$と交換することと対応する．
\end{Remark}

\begin{Example}
    従属関係
    \[ \text{open immersion} \implies \text{etale} \implies \text{fppf} \]
    があるから，
    inclusion map :: $\mathrm{Zar}(X) \inclmap \mathrm{ET}(X) \inclmap \mathrm{Fppf}(X)$
    はそれぞれcontinuous.
\end{Example}

\begin{Example}
    flat morphism :: $f \colon X \to Y$をとり，
    $f$によるpullback functorを$P_{f}$とする．
    （TODO: 要確認．）
\end{Example}

\section{Definitions : Sheaves.}
\begin{Def}[Sheaf, Topos, Morphism of Topoi.]
    \begin{myenum}{\roman*}
    \item
    site :: $S$上のpresheafとは，
    functor :: $\shF \colon S^{op} \to \Sets$のことである．

    \item
    射影$U \times_B V \to U$をpresheaf :: $\shF$で写した射を$\res_{U}^{U \times_B V}$と書く．

    \item
    presheaf on $S$ :: $\shF$がsheafであるとは，
    以下の図式がequalizer diagramであるということ．
    \[\xymatrix{
        \shF(U) \ar[r]& \prod_{i \in I} \shF(U_i)
            \ar@<1mm>[r]\ar@<-1mm>[r]& \prod_{(i,j) \in I \times I} \shF(U_i \times_U U_j)
    }\]
    ここで右の並行射は$\res_{U_i}^{U_i \times U_j}, \res_{U_j}^{U_i \times U_j}$である．

    \item
    Site :: $S$上の，
    圏$\cat{C}(=\Sets, \mathrm{Rings}, \mathrm{AbGrp}, \dots)$への
    presheafの圏を$\PSh(S, \cat{C})$，sheafの圏を$\Sh(S, \cat{C})$と書く．
    $\cat{C}=\Sets$の場合は略して$\Sh(S), \PSh(S)$と書く．

    \item
    morphism of shaeves :: $\shF \to \shF'$とは，
    natural transformationのことである．

    \item
    $T$ :: categoryがtoposであるとは，
    category of sheaves of sets on a siteと圏同値であるということである．

    \item
    $T, T'$ :: topoiとする．
    morphism of topoi :: $f \colon T \to T'$とは，
    以下の$3$つの射($2$ functor and $1$ isomorphism.)からなる．
    \[
        f_* \colon T \to T', \quad f^* \colon T' \to T,
        \quad \phi \colon \Hom_{T}(f^*(-), -) \isomap \Hom_{T'}(-. f_*(-)).
    \]
\end{myenum}
\end{Def}

\begin{Remark}
    上で定義したsheaf of setsと同様に，
    sheaf of abelian groups, sheaf of rings, ...が定義できる．
    これらはそれぞれsheaf of setsの圏 :: $\Sh(\cat{C}, \Sets)$における
    abelian group objects, ring objects, ...と定義される．
\end{Remark}

\begin{Remark}
    ``Topos"はギリシャ語で「場(place)」を意味する．
    ギリシャ語なので複数形は``topoi".

    $X$ :: schemeについて，
    $X$に関するtoposを$X_{et}, X_{ET}, \dots$などと書く．
    著者（例えば\cite{StacksProj}）によっては
    これらの記号を$\Sch/X$をunderlying catgoryとするsiteに用いる．
    しかし``Grothendieck’s insight is that the basic object of study is the topos, not the site."
    (M.Olsson ``Stacks")というということから，
    toposにsiteより簡単な記号を与えるのは理解できることである．
\end{Remark}

\begin{Def}[Direct Image Functor.]
    $f \colon \cat{C} \to \cat{C}'$をfunctor of sitesとする．
    この時，$F \in \PSh(\cat{C})$について
    \[ f_*F(-):=F(f(-)) \]
    とおくと，$f_* F \in \PSh(\cat{C}')$が得られる．
    $f$ :: continuous functorならば，
    $\shF \in \Sh(\cat{C})$に対し
    同様にして$f_*\shF \in \Sh(\cat{C}')$が得られる．
\end{Def}

\begin{Def}[Ringed Topos.]
\begin{myenum}{\roman*}
    \item
    $T$ :: toposと$T$のring object :: $\Lambda$を合わせてringed toposと呼ぶ．

    \item
    morphism of ringed topoi :: $(f, f^{\#}) \colon (T, \Lambda) \to (T', \Lambda')$は，
    \begin{itemize}
        \item morphism of topoi :: $f=(f_*, f^*, \phi) \colon T \to T'$と，
        \item morphism of ring in $T'$ :: $f^{\#} \colon \Lambda' \to f_* \Lambda$
    \end{itemize}
    の組である．
\end{myenum}
\end{Def}

\section{Examples : Sheaves.}
\begin{Example}
    $X$ :: schemeと，
    $\Sch/X$の部分圏をunderlying categoryとするsite :: $\cat{C}$(e.g. small/big Zariski site)について，
    $\ftor{X}(-)=\Hom_{\cat{C}}(-, X)$で
    functor :: $\ftor{X} \colon \cat{C} \to \Sets$を定める．
    この時，$\ftor{X}$ :: presheaf on $\cat{C}$．
    特に，後に示すとおり，
    fppf toplogyより荒い位相(e.g. Zariski, smooth, etale, ...)でsheafとなる．
\end{Example}

\begin{Example}[Constant (Pre)sheaf.]
    $\cat{C}$ :: siteとし，
    以下のようにpresheaf on $\cat{C}$ :: $\shF$を定める．
    \[ \shF \colon \emptyset \neq U \mapsto \R, \qquad \emptyset \mapsto \{0\}.  \]
    constant presheaf on a schemeがsheafでないのと全く同じ理由で，
    この$\shF$はsheafでない．
    具体的には$U \in \cat{C}$が連結でないschemeならば，
    $U_1 \sqcup U_2=U$なるcoveringを取ると，
    定義にあるdiagramがequalizer diagramにならない．
\end{Example}

\begin{Example}
    $S$ :: schemeについて，
    $\Sch/S$上のpresheafを
    \[ \shO_S \colon [X \to S] \mapsto \Gamma(X, \shO_X) \]
    で定める．
    このsheafは``structure sheaf of $S$"と呼ばれ，$\ftor{\affine^1_S}$と同型．
\end{Example}

\bibliographystyle{jplain}
\bibliography{reference}
\end{document}
